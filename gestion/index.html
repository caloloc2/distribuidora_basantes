<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Distribuidora Basantes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="icon" href="../icono.ico" />

        <link rel="stylesheet" href="../css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jcider/latest/jcider.css"/>

        <script src="../js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->        

		<header id="cabecera">
            <id id="logo">
                <figure>
                    <img src="../img/logo.png" alt="Distribuidora Basantes">
                </figure>
            </id>
        </header>

        <ul id="productos">
        	
        </ul>

        <div id="sin_productos">
            <p>No se ha registrado ning&uacute;n producto.</p>
        </div>

        <div id="mensaje">
            <p id="texto_mensaje">asdfasdfs</p>
        </div>

        <div id="eliminar">
            <p>Desea realmente eliminar esta imagen?</p>
            <input type="hidden" id="id_destacado_eliminar">
            <ul>
                <li><a href="#" id="eliminar_destacado"><span class="icon-done"></span> Si</a></li>
                <li><a href="#" id='cerrar_eliminar'><span class="icon-close"></span> Cancelar</a></li>
            </ul>
        </div>

        <div id="editar">
            <p>Actualice la informaci&oacute;n.</p>
            <input type="hidden" id="id_destacado_editar">
            <div class="grupo">
                <label for="">Descripci&oacute;n del Producto</label>
                <input type="text" id="descripcion_editar">
            </div>

            <div class="grupo">
                <label for="">Precio de Venta</label>
                <input type="number" step="0.10" id="precio_editar">
            </div>

            <div class="grupo">
                <label for="">Imagen</label>
                <input type="file" id="imagen">
            </div>

            <ul>
                <li><a href="#" id="editar_destacado"><span class="icon-done"></span> Aceptar</a></li>
                <li><a href="#" id='cerrar_modificar'><span class="icon-close"></span> Cancelar</a></li>
            </ul>
        </div>
        
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../js/vendor/jquery-1.11.2.min.js"><\/script>')</script>        
    </body>
</html>


<script>
    $(document).ready(function(){
        Busqueda();
    })

    function Busqueda(){
        $('#sin_productos').hide();
        $.ajax({
            url: 'includes/destacados.php',
            dataType: 'html',
            success: function(datos) {
                if (datos.trim()!=''){
                    $('#productos').html(datos);
                }else{
                    $('#sin_productos').fadeIn(300);
                }
                
            }
        });
    }

    function Mostrar(id){
        $.ajax({
            url: 'includes/mostrar.php',
            data:{
                id: id
            },
            type: 'POST',
            dataType: 'json',
            success: function(datos) {
                console.log(datos);
                Mensaje('Se ha cambiado la vista del producto en la web.');
                Busqueda();                
            }
        });
    }

    function Mensaje(texto){
        $('#texto_mensaje').html(texto);
        $('#mensaje').fadeIn(300);
        setTimeout(function(){
            $('#mensaje').fadeOut(300);
        }, 3000);
    }

    function Editar(id){
        $.ajax({
            url: 'includes/obtener_info.php',
            data:{
                id: id
            },
            type: 'POST',
            dataType: 'json',
            success: function(datos) {
                console.log(datos);
                document.getElementById('descripcion_editar').value = datos['descripcion'];
                document.getElementById('precio_editar').value = datos['precio'];
                $('#editar').fadeIn(300);
            }
        });
        
    }

    function Eliminar(id){
        document.getElementById('id_destacado_eliminar').value = id;
        $('#eliminar').fadeIn(300);
    }

    $('#cerrar_eliminar').click(function(){
        $('#eliminar').fadeOut(300);   
    })

    $('#cerrar_modificar').click(function(){
        $('#editar').fadeOut(300);   
    })

    $('#eliminar_destacado').click(function(){
        $.ajax({
            url: 'includes/eliminar.php',
            data:{
                id: document.getElementById('id_destacado_eliminar').value
            },
            type: 'POST',
            dataType: 'json',
            success: function(datos) {
                console.log(datos);
                Busqueda();
                $('#eliminar').fadeOut(300);
            }
        });
        
    })    
</script>
